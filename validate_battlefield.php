<?php
function validate_battlefield(array $field): bool
{
    $val = true;
    $list_of_ships = [4, 3, 3, 2, 2, 2, 1, 1, 1, 1];
    $used_fields = [];
    $length_of_bf_ships = [];

    for ($i = 0; $i < 10; $i++) {
        for ($j = 0; $j < 10; $j++) {
            if ($field[$i][$j] == 1) {
                $used_fields[] = [$i, $j];
            }
        }
    }

    $val = checkNeighbours($used_fields);


    if ($val) {

        while (count($used_fields) != 0) {

            $ship_length = 1;

            $el = array_shift($used_fields);

            $act_ship = [];

            while (in_array([$el[0] + $ship_length, $el[1]], $used_fields)) {

                $act_ship[] = [$el[0] + $ship_length, $el[1]];

                $ship_length++;

            }

            while (in_array([$el[0], $el[1] + $ship_length], $used_fields)) {

                $act_ship[] = [$el[0], $el[1] + $ship_length];

                $ship_length++;
            }

            $length_of_bf_ships [] = $ship_length;

            $used_fields = array_udiff($used_fields, $act_ship, "myfunction");
        }
        rsort($length_of_bf_ships);

        $val = ($list_of_ships === $length_of_bf_ships);
    }

    var_dump($val);

    return $val;
}

function checkNeighbours($used_field)
{
    foreach ($used_field as $el) {

        if (in_array([$el[0] + 1, $el[1] + 1], $used_field)) {
            return false;
        }
        if (in_array([$el[0] + 1, $el[1] - 1], $used_field)) {
            return false;
        }
    }

    return true;

}

function myfunction($a, $b)
{

    if ($a === $b) {
        return 0;
    }
    return ($a > $b) ? 1 : -1;
}

/*
validate_battlefield([
    [1, 0, 0, 0, 0, 1, 1, 0, 0, 0],
    [1, 0, 1, 0, 0, 0, 0, 0, 1, 0],
    [1, 0, 1, 0, 1, 1, 1, 0, 1, 0],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
    [0, 0, 0, 0, 1, 1, 1, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
    [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
]);
*/


$testArr = array(
    0 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    1 =>
        array(
            0 => 0,
            1 => 0,
            2 => 1,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    2 =>
        array(
            0 => 0,
            1 => 0,
            2 => 1,
            3 => 0,
            4 => 1,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    3 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    4 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    5 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 1,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    6 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    7 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 1,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    8 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 1,
            8 => 0,
            9 => 0,
        ),
    9 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
);


validate_battlefield($testArr);

$testArr2 = array(
    0 =>
        array(
            0 => 1,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    1 =>
        array(
            0 => 1,
            1 => 0,
            2 => 1,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    2 =>
        array(
            0 => 1,
            1 => 0,
            2 => 1,
            3 => 0,
            4 => 1,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    3 =>
        array(
            0 => 1,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    4 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    5 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 1,
            4 => 1,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    6 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    7 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 1,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    8 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 1,
            8 => 0,
            9 => 0,
        ),
    9 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
);

validate_battlefield($testArr2);

$testArr3 = array(
    0 =>
        array(
            0 => 1,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    1 =>
        array(
            0 => 1,
            1 => 0,
            2 => 1,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    2 =>
        array(
            0 => 1,
            1 => 0,
            2 => 1,
            3 => 0,
            4 => 1,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    3 =>
        array(
            0 => 1,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    4 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    5 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 1,
            4 => 1,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    6 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    7 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 1,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    8 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 1,
            8 => 0,
            9 => 0,
        ),
    9 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
);
validate_battlefield($testArr3);

$testArr4 = array(
    0 =>
        array(
            0 => 1,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    1 =>
        array(
            0 => 1,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    2 =>
        array(
            0 => 1,
            1 => 1,
            2 => 0,
            3 => 0,
            4 => 1,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    3 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    4 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    5 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 1,
            5 => 1,
            6 => 1,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    6 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 1,
            9 => 0,
        ),
    7 =>
        array(
            0 => 0,
            1 => 1,
            2 => 0,
            3 => 1,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
    8 =>
        array(
            0 => 0,
            1 => 1,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 1,
            8 => 0,
            9 => 0,
        ),
    9 =>
        array(
            0 => 0,
            1 => 0,
            2 => 0,
            3 => 0,
            4 => 0,
            5 => 0,
            6 => 0,
            7 => 0,
            8 => 0,
            9 => 0,
        ),
);
validate_battlefield($testArr4);
$testArr5 = [
    [1, 0, 0, 0, 0, 1, 1, 0, 0, 0,],
    [1, 0, 1, 0, 0, 0, 0, 0, 1, 0,],
    [1, 0, 1, 0, 1, 1, 1, 0, 1, 0,],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0,],
    [0, 0, 0, 0, 0, 0, 0, 0, 1, 0,],
    [0, 0, 0, 0, 1, 1, 1, 0, 0, 0,],
    [0, 0, 0, 0, 0, 0, 0, 0, 1, 0,],
    [0, 0, 0, 1, 0, 0, 0, 0, 0, 0,],
    [0, 0, 0, 0, 0, 0, 0, 1, 0, 0,],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0,],
];

validate_battlefield($testArr5); //failure
$testArr6 = [
    [1, 0, 0, 0, 0, 1, 1, 0, 0, 0,],
    [1, 0, 1, 0, 0, 0, 0, 0, 1, 0,],
    [1, 0, 1, 0, 1, 1, 1, 0, 1, 0,],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0,],
    [0, 0, 0, 0, 0, 0, 0, 0, 1, 0,],
    [0, 0, 0, 0, 1, 1, 1, 0, 0, 0,],
    [0, 0, 0, 1, 0, 0, 0, 0, 1, 0,],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0,],
    [0, 0, 0, 0, 0, 0, 0, 1, 0, 0,],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0,],
];
validate_battlefield($testArr6);
?>


